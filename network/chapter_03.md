# 무엇을 공부 했는가?

네트워크 3장의 핵심은, `라우터 - 라우터` 간의 데이터 송/수신을 위한 어드레싱 과정이다. 여기서 데이터 송신처, 데이터 수신처의 IP를 어떻게 생성 되고, 어떻게 요청하고, 어떻게 받는 지를 알아가는 과정을 공부하게 된다.

## 네트워크를 나누는 이유

- 스위치로 구성된 네트워크에서는 컴퓨터 1대가 송신한 브로드캐스트 통신이 모든 컴퓨터에 전송된다.

- 라우터는 브로드캐스트를 중계하지 않으므로, 라우터를 넘어서는 브로드캐스트는 전송이 불가하다.

- 그러면 라우터 - 라우터 간 통신을 가능하게 하는 것은 무엇일까? 당연하게도 `어드레싱` 이 핵심이고, 그 가운데에 IP 주소가 존재한다.

- 어드레싱이 완료 되면, 목적지 까지 어떻게 도달할 것인지를 결정하는 작업을 `라우팅` 이라고 부른다.

- `어드레싱` 과 `라우팅`으로 인터넷 작업을 수행하는 약속을 `IP(Internet Protocol)` 이라고 부른다.

## IP 주소가 MAC 주소와 구별되는 점

- `네트워크 관리자` 가 관여해서 주소를 할당한다.

- 주소를 할당할 때, IP 풀을 사용한다.

- 논리 주소로 `위치 정보`가 포함이 되어있다는 점이다.

- 어디 네트워크에 있는 어느 컴퓨터의 정보

- 이때, 컴퓨터 인터페이스의 정보나 위치 정보는 가변적인 데이터 이기 때문에, IP 주소는 할당하고 부터 `대여기간`이 존재하고 대여기간 이후로는 파기된다는 특성이 있다.

- 왜 파기할까?

- IP 주소를 담는 테이블은 변경이 없다는 점에 주목한다. 인터페이스가 손상 되는 경우 네트워크 번호와 맥 주소로 대응 되는 테이블의 관계 매칭을 위해 일정 기간이 지나면 파기되는 특성이 있다.

- 그러면 어떻게 관리하는 가?

- 그래서, IP 주소를 필요할 때마다 요청하고, 응답받는 과정을 매번 거치는 동작을 수행한다.

## IP 주소의 구조

- 우리가 일반적으로 사용하는 IPv4는 32비트를 사용한다.

- 각각의 자리는 10진수로 표기되고, 8비트 마다 끊는다는 특성이 있다.

- 그러면 한 자리에 올 수 있는 값의 범위는 2^8가지 이므로 0 ~ 255가 값의 범위라고 말할 수 있다.

- 8비트 단위를 `옥텟` 이라고 부름.

- 네트워크 번호, 컴퓨터 번호로 조합된다는 특성이 있다.

## 그러면, 네트워크 번호와 컴퓨터 번호를 어떻게 구분할 수 있을까?

- IP 주소를 조직의 규모에 따라서 클래스를 나누고 클래스 범위 내의 주소를 할당한다.

- 이 방식을 `클래스풀 어드레싱` 이라고 부름.

- 아래의 아이디어로 번호를 구별하기로 했다.

1. 네트워크를 분할 한다.
- 네트워크를 잘게 분할해 `서브네트워크`의 집합 으로 만드는 것. 책의 예시가 참 좋은데, 인천광역시는 인천시 연수구, 인천시 중구, 인천시 서구... 등으로 나눌 수 있는 것과 마찬가지로 구에 해당하는 것이 `서브넷` 이라고 생각하면 된다.

- 이 서브넷 번호를 만들 때는 `호스트 번호의 비트`를 나눠서 서브넷 번호, 호스트 번호로 분할 한다.

- 호스트 번호의 수는 제한이 되어있기 때문에, 서브넷 번호를 많이 가져가면 호스트 수는 반비례 할 수 밖에 없다.

- 서브넷 부분 + 호스트 부분 = 8비트가 되어야 하므로 서브넷이 10개 필요한 경우라면 최대 호스트 수는 몇 대인지 추론이 가능하다.

- 재밌는 점은, 서브넷마스크의 비트열 중 네트워크 번호에 해당하는 부분은 모두 1로 표기하는 점.

- 그래서 서브넷마스크는 0과 1로만 이루어진 비트열이다.

## 낭비되는 IP가 없도록 하라

- 클래스풀 어드레싱에서 클래스리스 어드레싱 개념을 사용한 이유이다.

## 이더넷 헤더의 송신처, 수신처 MAC 주소를 얻으려면?

- DHCP (Dynamic Host Configuration Protocol)

- 클라이언트가 서버에게 IP 주소 할당을 요청한다.

- 네트워크 관리자는 `IP 주소 풀`에서 사용하고 있지 않은 주소를 골라 `대여기간`과 함께 할당 해준다.

- 계속 쓰고싶으면 재할당 요청을 하면 된다.

## 브로드캐스트는 아주 유용하다.

- 언제? 클라이언트가 수신처를 모를 때. 모두에게 전달하면 되니까 문제 해결을 한다는 점이다.

- 브로드캐스트는 `DHCP`, `ARP` 에서 주소 할당 요청을 보낼 때 쓰이는 중심적인 개념이다. 

## 비트열은 인간이 소통하기 힘든 규칙이므로, 문자열을 사용하자.

- `이름` : `IP 주소`를 대응 시키자.
-  DNS 서버는 이름에 매칭되는 IP 주소를 데이터베이스에서 찾는다.
- 다른 서버의 IP 주소를 요청하려면, 라우터를 타고 다른 DNS 서버에 IP를 요청해서 할당한다.
